# Changelog Generation

Learn how to customize Versu's changelog generation.

## Basic Configuration

Versu uses [conventional-changelog-writer] under the hood to generate changelogs based on your commit history. Changelog generation will pick up all commits since the last release and format them according to the rules defined in your configuration.

You can customize both the generation of the root changelog and the module changelogs (if you're using a monorepo setup) by providing specific configurations for each.

::: code-group

```javascript [versu.config.js]
export default {
  // Other configuration options
  changelog: {
    // Changelog configuration options
    root: {
      // Root changelog configuration (optional)
      context: { /* */ }, // Context<Commit> (1)
      options: { /* */ }, // Options<Commit> (2)
    },
    module: {
      // Module changelog configuration (optional)
      context: { /* */ }, // Context<Commit> (1)
      options: { /* */ }, // Options<Commit> (2)
    },
  },
};
```

:::

<sup>1</sup> The `context` property allows you to provide additional information about the commits being processed. This can include details about the commit types, scopes, and any other relevant metadata that can be used to customize the changelog output.

<sup>2</sup> The `options` property allows you to specify various options for how the changelog is generated. This can include settings for how commit messages are formatted, how sections are organized, and any other customization options provided by the underlying changelog generation library.

## Grouping Commits

As an example lets imagine you want to group commits in your changelog by their type (e.g., features, bug fixes, etc.). You can achieve this by customizing the `context` and `options` properties in your `changelog` configuration.

::: code-group

```javascript [versu.config.js]
function commitGroupsSort(a, b) {
    const order = [
        "âœ¨ Features",
        "ðŸ› Bug Fixes",
        "ðŸ“ Documentation",
        "âš¡ï¸ Performance",
        "â™»ï¸ Refactor",
        "ðŸŽ¨ Styling",
        "âœ… Testing",
        "ðŸ¤– Build",
        "ðŸ” CI",
        "ðŸ“¦ Chores",
        "âª Revert",
        "â“ Other",
    ];
    return order.indexOf(a.title || "") - order.indexOf(b.title || "");
};

function transform(commit, context) {
    const typeMap = {
        feat: "âœ¨ Features",
        fix: "ðŸ› Bug Fixes",
        doc: "ðŸ“ Documentation",
        perf: "âš¡ï¸ Performance",
        refactor: "â™»ï¸ Refactor",
        style: "ðŸŽ¨ Styling",
        test: "âœ… Testing",
        build: "ðŸ¤– Build",
        ci: "ðŸ” CI",
        chore: "ðŸ“¦ Chores",
        revert: "âª Revert",
    };

    // 1. Create a shallow copy so we don't mutate the original
    const modifiedCommit = {...commit};

    // 2. Skip commits without a type (e.g., merge commits)
    if (!modifiedCommit.type) return null;

    /**
     * 3. Map the type to a human-friendly title with an emoji,
     * defaulting to "Other" if unknown
     */
    modifiedCommit.type = typeMap[modifiedCommit.type] || "â“ Other";

    return modifiedCommit;
};

const options = {
    // How to group the commits (mapped in transform)
    groupBy: "type",
    // The order sections appear in the changelog
    commitGroupsSort,
    // Transform raw commit data into the new format
    transform,
};

export default {
  // Other configuration options
  changelog: {
    root: {
      options,
    },
    module: {
      options,
    },
  },
};
```

:::

## Changelog Format

Output format is fully customizable by using handlebars templates. You can provide your own templates for the overall changelog structure, as well as for individual sections and commit entries. This allows you to create a changelog that matches your project's style and requirements.

As an example lets say we want to use a variant of the [Keep a Changelog](https://keepachangelog.com/en/1.0.0/) format with the emojis and grouping from the previous example.

For that we need to define four templates:

- **Header**: The template for the changelog header.
- **Footer**: The template for the changelog footer.
- **Commit**: The template for individual commit entries.
- **Main**: The template for the overall changelog structure.

### Header Template

The header template will contain the initial part of the Keep a Changelog format.

::: code-group

```handlebars [header.hbs]
# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

```

:::

### Footer Template

The footer will contain just a note about the changelog being generated by Versu.

::: code-group

```handlebars [footer.hbs]

---
*Generated by versu*

```

:::

### Commit Template

The commit template will define how individual commits are displayed in the changelog. In this case, we want to show the commit subject and scope (if available) following Keep a Changelog's style.

::: code-group

```handlebars [commit.hbs]
- {{subject}} {{#if scope}} ({{scope}}){{/if}}

```

:::

### Main Template

The main template will define the overall structure of the changelog, including how versions and sections are organized.

::: code-group

```handlebars [main.hbs]
{{~#if prepend}}{{> header}}
{{prependPlaceholder}}

{{/if~}}
{{~#if version}}
{{~#if linkCompare}}
## [{{version}}]({{repoUrl}}/compare/{{previousTag}}...{{currentTag}}) - {{date}}
{{~else}}
## [{{version}}]({{repoUrl}}/releases/tag/{{version}}) - {{date}}
{{~/if}}
{{~else}}
{{~#if previousTag}}
## [Unreleased]({{repoUrl}}/compare/{{previousTag}}...HEAD) - {{date}}
{{~else}}
## Unreleased
{{~/if}}
{{~/if}}

{{#each commitGroups}}

### {{title}}

{{#each commits}}
{{> commit}}
{{/each}}
{{/each}}
{{#if prepend}}{{> footer}}{{/if}}

```

:::

Note that in the main template we are using the `commit` partial to render each individual commit entry, and we are also conditionally rendering the header and footer based on whether this is a new changelog or an update to an existing one, which is determined by the presence of the `prepend` variable.

Variables like `previousTag`, `currentTag`, `prepend` are provided by Versu during the changelog generation process, allowing you to create dynamic and informative changelogs.

In addition `prependPlaceholder` is a special variable that needs to be set in your context in order for Versu to know where to insert the new changelog content when updating an existing changelog file.

### Putting It All Together

Place the templates in a `templates` folder in your project root, and then reference them in your `versu.config.js` as shown below:

::: code-group

```javascript [versu.config.js]
import * as fs from "fs";
import * as path from "path";

const cwd = import.meta.dirname;

// Assume the files 
const templatesPath = path.join(cwd, "templates");

const mainTemplate = fs.readFileSync(path.join(templatesPath, "main.hbs"), "utf-8");
const commitTemplate = fs.readFileSync(path.join(templatesPath, "commit.hbs"), "utf-8");
const headerTemplate = fs.readFileSync(path.join(templatesPath, "header.hbs"), "utf-8");
const footerTemplate = fs.readFileSync(path.join(templatesPath, "footer.hbs"), "utf-8");

const context = {
    prependPlaceholder: "<!-- versu-changelog-placeholder -->",
};

const options = {
    // How to group the commits (mapped in transform)
    groupBy: "type",
    // The order sections appear in the changelog
    commitGroupsSort,
    // Transform raw commit data into the new format
    transform,
    // Custom templates
    mainTemplate,
    headerPartial: headerTemplate,
    footerPartial: footerTemplate,
    commitPartial: commitTemplate,
};

export default {
  // Other configuration options
  changelog: {
    root: {
      context,
      options
    },
    module: {
      context,
      options
    },
  },
};
```

:::

For more details on how to customize the templates and the available variables, refer to the [conventional-changelog-writer documentation][conventional-changelog-writer].

### Example Output

With the above configuration, your generated changelog would look something like this:

```markdown
# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

<!-- versu-changelog-placeholder -->

## [1.0.0](https://github.com/sample-repo/sample-project/releases/tag/1.0.0) - 2026-02-09

### âœ¨ Features

- Add new authentication flow (auth)

---
*Generated by versu*

```

## Next Steps

- [Pre-release Versions](/guide/config/prerelease) - Pre-release setup
- [Configuration File](/guide/config/configuration-file) - Full config reference
- [Examples](/examples/basic-setup) - Real examples

---

Ready to set up pre-releases? Check out the [Pre-release Versions](/guide/config/prerelease) guide!

[conventional-changelog-writer]: https://github.com/conventional-changelog/conventional-changelog/tree/master/packages/conventional-changelog-writer